---
// EditEventModal component for admin dashboard
// This modal is used for editing both staged and existing events
---

<div id="editEventModal" class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h3 id="editEventModalTitle" class="modal-title">Edit Event</h3>
      <button type="button" onclick="closeEditEventModal()" class="modal-close-btn" aria-label="Close modal">
        <span class="material-symbols-outlined text-2xl">close</span>
      </button>
    </div>
    <form id="editEventForm">
      <div class="form-field">
        <label class="form-label">Title: <span class="form-label-required">*</span></label>
        <input type="text" id="editEventTitle" required class="form-input-base">
      </div>
      <div class="form-field">
        <label class="form-label">Description:</label>
        <textarea id="editEventDescription" rows="3" class="form-input-base"></textarea>
      </div>
      <div class="form-grid-2">
        <div>
          <label class="form-label">Start Date: <span class="form-label-required">*</span></label>
          <input type="date" id="editEventStartDate" required class="form-input-base">
        </div>
        <div>
          <label class="form-label">End Date:</label>
          <input type="date" id="editEventEndDate" class="form-input-base">
        </div>
      </div>
      <div class="form-grid-2">
        <div>
          <label class="form-label">Start Time:</label>
          <input type="time" id="editEventStartTime" class="form-input-base">
        </div>
        <div>
          <label class="form-label">End Time:</label>
          <input type="time" id="editEventEndTime" class="form-input-base">
        </div>
      </div>
      <div class="form-field">
        <label class="form-label">Email:</label>
        <input type="email" id="editEventEmail" placeholder="Leave empty to remove" class="form-input-base">
      </div>
      <div class="form-field">
        <label class="form-label">Website:</label>
        <input type="text" id="editEventWebsite" placeholder="www.example.com or https://..." class="form-input-base">
      </div>
      <div class="form-field">
        <label class="form-label">Registration Link:</label>
        <input type="text" id="editEventRegistrationLink" placeholder="www.example.com or https://..." class="form-input-base">
      </div>
      <div class="form-field">
        <label class="form-label">External Image URL:</label>
        <input type="url" id="editEventExternalImageUrl" placeholder="https://example.com/image.jpg" class="form-input-base">
      </div>
      <div class="form-field">
        <label class="form-label">Cost:</label>
        <input type="text" id="editEventCost" placeholder="e.g., Free, $10, $5-15" class="form-input-base">
      </div>
      <div class="form-field">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" id="editEventRegistration" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
          <span class="form-label">Registration Required</span>
        </label>
      </div>
      <div class="form-field">
        <label class="form-label">Primary Tag: <span class="form-label-required">*</span></label>
        <select id="editEventPrimaryTag" required class="form-input-base">
          <option value="">Select a primary tag...</option>
        </select>
      </div>
      <div class="form-field">
        <label class="form-label">Secondary Tag:</label>
        <select id="editEventSecondaryTag" class="form-input-base">
          <option value="">None</option>
        </select>
      </div>
      <div class="form-field">
        <label class="form-label">Location:</label>
        <div class="autocomplete-container">
          <input type="text" id="editEventLocationSearch" placeholder="Type to search existing locations..." autocomplete="off" class="form-input-base">
          <input type="hidden" id="editEventLocationId">
          <div id="editEventLocationDropdown" class="autocomplete-dropdown hidden"></div>
        </div>
        <div id="editEventLocationAddedContainer" class="mt-2 hidden">
          <label class="block mb-2 font-medium text-sm">Or add new location:</label>
          <input type="text" id="editEventLocationAdded" placeholder="Leave empty if using existing location" class="form-input-base">
        </div>
      </div>
      <div class="form-field">
        <label class="form-label">Organization:</label>
        <div class="autocomplete-container">
          <input type="text" id="editEventOrganizationSearch" placeholder="Type to search existing organizations..." autocomplete="off" class="form-input-base">
          <input type="hidden" id="editEventOrganizationId">
          <div id="editEventOrganizationDropdown" class="autocomplete-dropdown hidden"></div>
        </div>
        <div id="editEventOrganizationAddedContainer" class="mt-2 hidden">
          <label class="block mb-2 font-medium text-sm">Or add new organization:</label>
          <input type="text" id="editEventOrganizationAdded" placeholder="Leave empty if using existing organization" class="form-input-base">
        </div>
      </div>
      <div class="form-field">
        <label class="form-label">Parent Event:</label>
        <div class="autocomplete-container">
          <input type="text" id="editEventParentEventSearch" placeholder="Type to search for parent event..." autocomplete="off" class="form-input-base">
          <input type="hidden" id="editEventParentEventId">
          <div id="editEventParentEventDropdown" class="autocomplete-dropdown hidden"></div>
        </div>
        <p class="mt-1 text-sm text-gray-500">Leave empty if this is a top-level event</p>
      </div>
      <div class="form-field">
        <div class="flex flex-col gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" id="editEventExcludeFromCalendar" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
            <span class="form-label">Exclude from Calendar</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" id="editEventFeatured" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
            <span class="form-label">Featured Event</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" id="editEventDraft" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
            <span class="form-label">Save as Draft (Pending Status)</span>
          </label>
        </div>
      </div>
      <div class="form-field">
        <label class="form-label">Admin Comments:</label>
        <textarea id="editEventComments" rows="2" placeholder="Internal notes (not published)" class="form-input-base"></textarea>
      </div>
      <div class="form-actions" style="display: flex; justify-content: space-between; align-items: center; gap: 0.5rem;">
        <div style="display: flex; gap: 0.5rem;">
          <button type="button" onclick="duplicateCurrentEvent()" class="btn-duplicate">
            <span class="material-symbols-outlined" style="font-size: 1.125rem; vertical-align: middle; margin-right: 0.25rem;">content_copy</span>
            Duplicate
          </button>
          <button type="button" onclick="createSeriesFromCurrentEvent()" class="btn-series">
            <span class="material-symbols-outlined" style="font-size: 1.125rem; vertical-align: middle; margin-right: 0.25rem;">repeat</span>
            Create Series
          </button>
        </div>
        <div style="display: flex; gap: 0.5rem;">
          <button type="button" onclick="closeEditEventModal()" class="btn-cancel">Cancel</button>
          <button type="submit" class="btn-save">Save Changes</button>
        </div>
      </div>
    </form>
  </div>
</div>


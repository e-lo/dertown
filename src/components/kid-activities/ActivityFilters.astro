---
interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<div class={`filter-container ${className}`}>
  <!-- Timing & Availability Section -->
  <div class="filter-section mb-2">
    <button class="filter-toggle w-full flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors" data-section="timing">
      <div class="flex items-center">
        <span class="material-symbols-outlined mr-2 text-gray-600">schedule</span>
        <span class="font-medium text-gray-800 text-sm">Timing & Availability</span>
      </div>
      <span class="filter-arrow text-gray-500 transition-transform text-sm">▼</span>
    </button>
    <div class="filter-content hidden p-2 bg-white border border-gray-200 rounded-b-lg">
      <!-- Season Filter -->
      <div class="mb-3">
        <h4 class="text-sm font-medium text-gray-700 mb-3">When Activities Happen</h4>
        <div class="flex flex-wrap gap-2">
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-purple-100 text-purple-800 hover:bg-purple-200 cursor-pointer"
            data-filter="season"
            data-value="ongoing-or-soon"
          >
            <span class="material-symbols-outlined mr-1 text-sm">today</span>
            Ongoing or Starting Soon
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="season"
            data-value="fall"
          >
            <span class="material-symbols-outlined mr-1 text-sm">autumn</span>
            Fall
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="season"
            data-value="winter"
          >
            <span class="material-symbols-outlined mr-1 text-sm">ac_unit</span>
            Winter
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="season"
            data-value="spring"
          >
            <span class="material-symbols-outlined mr-1 text-sm">local_florist</span>
            Spring
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="season"
            data-value="summer"
          >
            <span class="material-symbols-outlined mr-1 text-sm">wb_sunny</span>
            Summer
          </button>
        </div>
      </div>
      
      <!-- Day of Week Filter -->
      <div class="mb-4">
        <h4 class="text-sm font-medium text-gray-700 mb-3">Day of Week</h4>
        <div class="flex flex-wrap gap-2">
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="MO"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Monday
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="TU"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Tuesday
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="WE"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Wednesday
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="TH"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Thursday
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="FR"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Friday
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="SA"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Saturday
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="day_of_week"
            data-value="SU"
          >
            <span class="material-symbols-outlined mr-1 text-sm">calendar_view_week</span>
            Sunday
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Age & Audience Section -->
  <div class="filter-section mb-2">
    <button class="filter-toggle w-full flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors" data-section="audience">
      <div class="flex items-center">
        <span class="material-symbols-outlined mr-2 text-gray-600">groups</span>
        <span class="font-medium text-gray-800 text-sm">Age & Audience</span>
      </div>
      <span class="filter-arrow text-gray-500 transition-transform text-sm">▼</span>
    </button>
    <div class="filter-content hidden p-2 bg-white border border-gray-200 rounded-b-lg">
      <div class="flex flex-wrap gap-2">
        <button 
          class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-pink-100 text-pink-800 hover:bg-pink-200 cursor-pointer"
          data-filter="age"
          data-value="toddlers"
        >
          <span class="material-symbols-outlined mr-1 text-sm">child_care</span>
          Toddlers (1-3)
        </button>
        <button 
          class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-purple-100 text-purple-800 hover:bg-purple-200 cursor-pointer"
          data-filter="age"
          data-value="preschool"
        >
          <span class="material-symbols-outlined mr-1 text-sm">school</span>
          Preschool (3-5)
        </button>
        <button 
          class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-indigo-100 text-indigo-800 hover:bg-indigo-200 cursor-pointer"
          data-filter="age"
          data-value="elementary"
        >
          <span class="material-symbols-outlined mr-1 text-sm">school</span>
          Elementary (6-10)
        </button>
        <button 
          class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer"
          data-filter="age"
          data-value="middle"
        >
          <span class="material-symbols-outlined mr-1 text-sm">school</span>
          Middle School (11-13)
        </button>
        <button 
          class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-green-100 text-green-800 hover:bg-green-200 cursor-pointer"
          data-filter="age"
          data-value="high"
        >
          <span class="material-symbols-outlined mr-1 text-sm">school</span>
          High School (14-18)
        </button>
      </div>
    </div>
  </div>

  <!-- Activity Details Section -->
  <div class="filter-section mb-2">
    <button class="filter-toggle w-full flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors" data-section="details">
      <div class="flex items-center">
        <span class="material-symbols-outlined mr-2 text-gray-600">category</span>
        <span class="font-medium text-gray-800 text-sm">Activity Details</span>
      </div>
      <span class="filter-arrow text-gray-500 transition-transform text-sm">▼</span>
    </button>
    <div class="filter-content hidden p-2 bg-white border border-gray-200 rounded-b-lg">
      <!-- Activity Type Filter -->
      <div class="mb-3">
        <h4 class="text-sm font-medium text-gray-700 mb-3">Activity Type</h4>
        <div class="flex flex-wrap gap-2">
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Sports"
          >
            <span class="material-symbols-outlined mr-1 text-sm">sports_soccer</span>
            Sports
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Gymnastics"
          >
            <span class="material-symbols-outlined mr-1 text-sm">fitness_center</span>
            Gymnastics
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Martial Arts"
          >
            <span class="material-symbols-outlined mr-1 text-sm">sports_martial_arts</span>
            Martial Arts
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Arts"
          >
            <span class="material-symbols-outlined mr-1 text-sm">palette</span>
            Arts & Culture
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Music"
          >
            <span class="material-symbols-outlined mr-1 text-sm">music_note</span>
            Music
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Dance"
          >
            <span class="material-symbols-outlined mr-1 text-sm">dance</span>
            Dance
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Theater"
          >
            <span class="material-symbols-outlined mr-1 text-sm">theater_comedy</span>
            Theater
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="STEM"
          >
            <span class="material-symbols-outlined mr-1 text-sm">science</span>
            STEM
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Outdoor"
          >
            <span class="material-symbols-outlined mr-1 text-sm">hiking</span>
            Outdoor Recreation
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Academic"
          >
            <span class="material-symbols-outlined mr-1 text-sm">school</span>
            Academic
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Social"
          >
            <span class="material-symbols-outlined mr-1 text-sm">groups</span>
            Social
          </button>
          <button 
            class="filter-pill inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer"
            data-filter="activity_type"
            data-value="Scouting"
          >
            <span class="material-symbols-outlined mr-1 text-sm">camping</span>
            Scouting
          </button>
        </div>
      </div>

      <!-- Location Filter -->
      <div class="mb-3">
        <h4 class="text-sm font-medium text-gray-700 mb-3">Location</h4>
        <div class="flex flex-wrap gap-2" id="locationFilters">
          <!-- Dynamically populated -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Initialize filter behavior
  document.addEventListener('DOMContentLoaded', function() {
    // Add click event listeners to filter section toggles
    const filterToggles = document.querySelectorAll('.filter-toggle');
    filterToggles.forEach(toggle => {
      toggle.addEventListener('click', function(e) {
        e.preventDefault();
        const content = this.nextElementSibling;
        const arrow = this.querySelector('.filter-arrow');
        
        if (content.classList.contains('hidden')) {
          content.classList.remove('hidden');
          arrow.style.transform = 'rotate(180deg)';
        } else {
          content.classList.add('hidden');
          arrow.style.transform = 'rotate(0deg)';
        }
      });
    });

    // Add click event listeners to all filter pills
    const filterPills = document.querySelectorAll('.filter-pill');
    filterPills.forEach(pill => {
      pill.addEventListener('click', function(e) {
        e.preventDefault();
        const filterType = this.getAttribute('data-filter');
        const filterValue = this.getAttribute('data-value');
        
        // Dispatch custom event for parent component to handle
        const event = new CustomEvent('filterChange', {
          detail: { type: filterType, value: filterValue }
        });
        document.dispatchEvent(event);
      });
    });
  });
</script> 